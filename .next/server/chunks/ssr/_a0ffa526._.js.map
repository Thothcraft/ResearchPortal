{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/app/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { Menu, X, User, LogOut, ChevronDown } from 'lucide-react';\n\nexport default function Header() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\n  const pathname = usePathname();\n\n  // Handle scroll effect for header\n  useEffect(() => {\n    const handleScroll = () => {\n      setIsScrolled(window.scrollY > 10);\n    };\n    \n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  const navigation = [\n    { name: 'Dashboard', href: '/devices', current: pathname === '/devices' },\n    { name: 'Data', href: '/data', current: pathname === '/data' },\n    { name: 'Training', href: '/training', current: pathname === '/training' },\n  ];\n\n  const handleSignOut = () => {\n    // Clear auth token\n    localStorage.removeItem('auth_token');\n    // Redirect to login\n    window.location.href = '/auth';\n  };\n\n  return (\n    <header className={`fixed w-full z-50 transition-all duration-300 ${\n      isScrolled ? 'bg-white/90 backdrop-blur-md shadow-sm' : 'bg-white/80 backdrop-blur-sm'\n    }`}\n    >\n      <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" aria-label=\"Top\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo */}\n          <div className=\"flex items-center\">\n            <Link href=\"/\" className=\"flex-shrink-0\">\n              <span className=\"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent\">\n                Thothcraft\n              </span>\n            </Link>\n          </div>\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden md:flex items-center space-x-8\">\n            {navigation.map((item) => (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={`${\n                  item.current\n                    ? 'text-indigo-600 font-medium'\n                    : 'text-gray-700 hover:text-indigo-600'\n                } px-3 py-2 text-sm font-medium transition-colors`}\n              >\n                {item.name}\n              </Link>\n            ))}\n          </div>\n\n          {/* User Menu - Desktop */}\n          <div className=\"hidden md:flex items-center\">\n            <div className=\"relative\">\n              <button\n                onClick={() => setUserMenuOpen(!userMenuOpen)}\n                className=\"flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                id=\"user-menu\"\n                aria-haspopup=\"true\"\n              >\n                <span className=\"sr-only\">Open user menu</span>\n                <div className=\"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600\">\n                  <User className=\"h-4 w-4\" />\n                </div>\n                <ChevronDown className=\"ml-1 h-4 w-4 text-gray-500\" />\n              </button>\n\n              {/* Dropdown menu */}\n              {userMenuOpen && (\n                <div className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\">\n                  <div className=\"py-1\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"user-menu\">\n                    <button\n                      onClick={handleSignOut}\n                      className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center\"\n                      role=\"menuitem\"\n                    >\n                      <LogOut className=\"mr-2 h-4 w-4\" />\n                      Sign out\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Mobile menu button */}\n          <div className=\"md:hidden flex items-center\">\n            <button\n              onClick={() => setIsOpen(!isOpen)}\n              className=\"inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-indigo-600 hover:bg-gray-100 focus:outline-none\"\n              aria-expanded=\"false\"\n            >\n              <span className=\"sr-only\">Open main menu</span>\n              {isOpen ? (\n                <X className=\"block h-6 w-6\" aria-hidden=\"true\" />\n              ) : (\n                <Menu className=\"block h-6 w-6\" aria-hidden=\"true\" />\n              )}\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Mobile menu */}\n      {isOpen && (\n        <div className=\"md:hidden bg-white border-t border-gray-200\">\n          <div className=\"px-2 pt-2 pb-3 space-y-1\">\n            {navigation.map((item) => (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={`${\n                  item.current\n                    ? 'bg-indigo-50 text-indigo-700'\n                    : 'text-gray-700 hover:bg-gray-50 hover:text-indigo-600'\n                } block px-3 py-2 rounded-md text-base font-medium`}\n                onClick={() => setIsOpen(false)}\n              >\n                {item.name}\n              </Link>\n            ))}\n            <button\n              onClick={() => {\n                handleSignOut();\n                setIsOpen(false);\n              }}\n              className=\"w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-indigo-600 flex items-center\"\n            >\n              <LogOut className=\"mr-2 h-4 w-4\" />\n              Sign out\n            </button>\n          </div>\n        </div>\n      )}\n    </header>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\n\ntype User = {\n  username: string;\n  token: string;\n} | null;\n\ntype AuthContextType = {\n  user: User;\n  login: (username: string, password: string) => Promise<void>;\n  logout: () => void;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n};\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [user, setUser] = useState<User>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  // Initialize auth state from localStorage\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    const userData = localStorage.getItem('user');\n    \n    if (token && userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n      } catch (e) {\n        console.error('Failed to parse user data', e);\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('user');\n      }\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username: string, password: string) => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const response = await fetch('https://web-production-d7d37.up.railway.app/token', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: new URLSearchParams({\n          username,\n          password,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Login failed');\n      }\n\n      const data = await response.json();\n      \n      const userData = {\n        username,\n        token: data.access_token,\n      };\n\n      // Store token and user data\n      localStorage.setItem('auth_token', data.access_token);\n      localStorage.setItem('user', JSON.stringify(userData));\n      \n      setUser(userData);\n      router.push('/devices');\n    } catch (err: any) {\n      console.error('Login error:', err);\n      setError(err.message || 'Login failed. Please try again.');\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n    setUser(null);\n    router.push('/auth/login');\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        login,\n        logout,\n        isAuthenticated: !!user,\n        isLoading,\n        error,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Protected route component\nexport const ProtectedRoute = ({ children }: { children: ReactNode }) => {\n  const { isAuthenticated, isLoading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push('/auth/login');\n    }\n  }, [isAuthenticated, isLoading, router]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\n      </div>\n    );\n  }\n\n  return isAuthenticated ? <>{children}</> : null;\n};\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAHA;;;;AAmBA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAQ;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,WAAW,aAAa,OAAO,CAAC;QAEtC,IAAI,SAAS,UAAU;YACrB,IAAI;gBACF,MAAM,aAAa,KAAK,KAAK,CAAC;gBAC9B,QAAQ;YACV,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;YAC1B;QACF;QACA,aAAa;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,UAAkB;QACrC,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,qDAAqD;gBAChF,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,IAAI,gBAAgB;oBACxB;oBACA;gBACF;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,UAAU,MAAM,IAAI;YACtC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,MAAM,WAAW;gBACf;gBACA,OAAO,KAAK,YAAY;YAC1B;YAEA,4BAA4B;YAC5B,aAAa,OAAO,CAAC,cAAc,KAAK,YAAY;YACpD,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAE5C,QAAQ;YACR,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,SAAS,IAAI,OAAO,IAAI;YACxB,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA,iBAAiB,CAAC,CAAC;YACnB;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAGO,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAA2B;IAClE,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG;IACvC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,aAAa,CAAC,iBAAiB;YAClC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAW;KAAO;IAEvC,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,OAAO,gCAAkB;kBAAG;wBAAe;AAC7C","debugId":null}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/app/%28protected%29/layout.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Header from '../components/Header';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function ProtectedLayout({\n  children,\n}: {\n  children: ReactNode;\n}) {\n  const router = useRouter();\n  const { isAuthenticated, isLoading } = useAuth();\n  const [isClient, setIsClient] = useState(false);\n\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated && isClient) {\n      router.push('/auth/login');\n    }\n  }, [isAuthenticated, isLoading, router, isClient]);\n\n  if (isLoading || !isClient) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null; // Will redirect in useEffect\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header />\n      <main className=\"pt-16\">\n        {children}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,wHAAA,CAAA,UAAO,AAAD;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,YAAY;IACd,GAAG,EAAE;IAEL,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,aAAa,CAAC,mBAAmB,UAAU;YAC9C,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAW;QAAQ;KAAS;IAEjD,IAAI,aAAa,CAAC,UAAU;QAC1B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO,MAAM,6BAA6B;IAC5C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,4HAAA,CAAA,UAAM;;;;;0BACP,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT","debugId":null}}]
}