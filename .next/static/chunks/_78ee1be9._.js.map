{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\n\ntype User = {\n  username: string;\n  token: string;\n} | null;\n\ntype AuthContextType = {\n  user: User;\n  login: (username: string, password: string) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n};\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  // Initialize auth state from localStorage\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    const userData = localStorage.getItem('user');\n    \n    if (token && userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n      } catch (e) {\n        console.error('Failed to parse user data', e);\n        localStorage.removeItem('auth_token');\n      }\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username: string, password: string): Promise<boolean> => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      console.log('Attempting login with:', { username });\n      \n      const response = await fetch('https://web-production-d7d37.up.railway.app/token', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n        },\n        body: JSON.stringify({\n          username,\n          password\n        }),\n      });\n\n      const data = await response.json().catch(() => ({}));\n      console.log('Login response:', { status: response.status, data });\n\n      if (!response.ok) {\n        let errorMessage = 'Invalid username or password';\n        if (data && typeof data.detail === 'string') {\n          errorMessage = data.detail;\n        } else if (data && Array.isArray(data.detail)) {\n          errorMessage = data.detail.map((err: any) => err.msg || JSON.stringify(err)).join(', ');\n        } else if (data && data.message) {\n          errorMessage = data.message;\n        }\n        setError(errorMessage);\n        return false;\n      }\n      \n      if (!data.access_token) {\n        setError('No access token received');\n        return false;\n      }\n      \n      const userData = {\n        username,\n        token: data.access_token,\n      };\n\n      // Store token and user data\n      localStorage.setItem('auth_token', data.access_token);\n      localStorage.setItem('user', JSON.stringify(userData));\n      \n      setUser(userData);\n      return true;\n    } catch (error) {\n      console.error('Login error:', error);\n      setError('An unexpected error occurred. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n    setUser(null);\n    router.push('/auth');\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        login,\n        logout,\n        isAuthenticated: !!user,\n        isLoading,\n        error,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Protected route component\nexport const ProtectedRoute = ({ children }: { children: ReactNode }) => {\n  const { isAuthenticated, isLoading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push('/auth/login');\n    }\n  }, [isAuthenticated, isLoading, router]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\n      </div>\n    );\n  }\n\n  return isAuthenticated ? <>{children}</> : null;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/components/ChatBubble.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { MessageSquare, X } from 'lucide-react';\n\nexport default function ChatBubble() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState<{text: string; isUser: boolean}[]>([]);\n\n  const handleSendMessage = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!message.trim()) return;\n    \n    // Add user message\n    setMessages(prev => [...prev, { text: message, isUser: true }]);\n    setMessage('');\n    \n    // Simulate bot response\n    setTimeout(() => {\n      setMessages(prev => [...prev, { \n        text: 'Thanks for your message! A team member will get back to you soon.', \n        isUser: false \n      }]);\n    }, 1000);\n  };\n\n  return (\n    <div className=\"fixed bottom-6 right-6 z-50 flex flex-col items-end space-y-2\">\n      {isOpen && (\n        <div className=\"w-80 bg-white rounded-lg shadow-xl overflow-hidden flex flex-col h-[500px]\">\n          <div className=\"bg-indigo-600 text-white p-4 flex justify-between items-center\">\n            <h3 className=\"font-semibold\">Support Chat</h3>\n            <button \n              onClick={() => setIsOpen(false)}\n              className=\"text-white hover:text-gray-200\"\n            >\n              <X size={20} />\n            </button>\n          </div>\n          \n          <div className=\"flex-1 p-4 overflow-y-auto bg-gray-50\">\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-start\">\n                <div className=\"bg-indigo-100 text-gray-800 rounded-lg p-3 max-w-[80%]\">\n                  <p>Hello! How can I help you today?</p>\n                </div>\n              </div>\n              \n              {messages.map((msg, index) => (\n                <div \n                  key={index} \n                  className={`flex ${msg.isUser ? 'justify-end' : 'justify-start'}`}\n                >\n                  <div \n                    className={`rounded-lg p-3 max-w-[80%] ${\n                      msg.isUser \n                        ? 'bg-indigo-600 text-white' \n                        : 'bg-indigo-100 text-gray-800'\n                    }`}\n                  >\n                    <p>{msg.text}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          <form onSubmit={handleSendMessage} className=\"p-4 border-t border-gray-200\">\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"text\"\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                placeholder=\"Type your message...\"\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n              />\n              <button\n                type=\"submit\"\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n              >\n                Send\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n      \n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center text-white shadow-lg hover:bg-indigo-700 transition-colors\"\n        aria-label=\"Open chat\"\n      >\n        {isOpen ? <X size={24} /> : <MessageSquare size={24} />}\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAqC,EAAE;IAE9E,MAAM,oBAAoB,CAAC;QACzB,EAAE,cAAc;QAChB,IAAI,CAAC,QAAQ,IAAI,IAAI;QAErB,mBAAmB;QACnB,YAAY,CAAA,OAAQ;mBAAI;gBAAM;oBAAE,MAAM;oBAAS,QAAQ;gBAAK;aAAE;QAC9D,WAAW;QAEX,wBAAwB;QACxB,WAAW;YACT,YAAY,CAAA,OAAQ;uBAAI;oBAAM;wBAC5B,MAAM;wBACN,QAAQ;oBACV;iBAAE;QACJ,GAAG;IACL;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,wBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,6LAAC;gCACC,SAAS,IAAM,UAAU;gCACzB,WAAU;0CAEV,cAAA,6LAAC,+LAAA,CAAA,IAAC;oCAAC,MAAM;;;;;;;;;;;;;;;;;kCAIb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;sDAAE;;;;;;;;;;;;;;;;gCAIN,SAAS,GAAG,CAAC,CAAC,KAAK,sBAClB,6LAAC;wCAEC,WAAW,CAAC,KAAK,EAAE,IAAI,MAAM,GAAG,gBAAgB,iBAAiB;kDAEjE,cAAA,6LAAC;4CACC,WAAW,CAAC,2BAA2B,EACrC,IAAI,MAAM,GACN,6BACA,+BACJ;sDAEF,cAAA,6LAAC;0DAAG,IAAI,IAAI;;;;;;;;;;;uCAVT;;;;;;;;;;;;;;;;kCAiBb,6LAAC;wBAAK,UAAU;wBAAmB,WAAU;kCAC3C,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oCAC1C,aAAY;oCACZ,WAAU;;;;;;8CAEZ,6LAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;0BAQT,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;gBACV,cAAW;0BAEV,uBAAS,6LAAC,+LAAA,CAAA,IAAC;oBAAC,MAAM;;;;;yCAAS,6LAAC,2NAAA,CAAA,gBAAa;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAIzD;GA5FwB;KAAA","debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/providers.tsx"],"sourcesContent":["'use client';\n\nimport { AuthProvider } from './contexts/AuthContext';\nimport ChatBubble from './components/ChatBubble';\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return (\n    <AuthProvider>\n      {children}\n      <ChatBubble />\n    </AuthProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBACE,6LAAC,2HAAA,CAAA,eAAY;;YACV;0BACD,6LAAC,4HAAA,CAAA,UAAU;;;;;;;;;;;AAGjB;KAPgB","debugId":null}}]
}