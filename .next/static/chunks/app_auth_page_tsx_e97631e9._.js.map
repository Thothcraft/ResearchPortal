{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/gad/Desktop/Thothcraft/ResearchPortal/app/auth/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { User, Mail, Lock, Eye, EyeOff, UserCheck } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\n\nexport default function AuthPage() {\n  const [isLogin, setIsLogin] = useState(true);\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n    role: 'researcher'\n  });\n  const router = useRouter();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    // Basic validation\n    if (!formData.username || formData.username.length < 3) {\n      alert('Username must be at least 3 characters');\n      setLoading(false);\n      return;\n    }\n    \n    if (!formData.password || formData.password.length < 6) {\n      alert('Password must be at least 6 characters');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Call backend authentication\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'https://web-production-d7d37.up.railway.app'}/token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          username: formData.username,\n          password: formData.password\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        \n        // Store auth info from backend response\n        localStorage.setItem('auth_token', data.access_token || 'demo-token-' + Date.now());\n        localStorage.setItem('user_role', data.role || formData.role);\n        localStorage.setItem('username', formData.username);\n        \n        // Redirect to main app\n        router.push('/devices');\n      } else {\n        // Handle authentication failure\n        const errorData = await response.json().catch(() => ({ message: 'Authentication failed' }));\n        alert(`Login failed: ${errorData.message || 'Invalid credentials'}`);\n      }\n    } catch (error) {\n      console.error('Auth error:', error);\n      \n      // Demo mode with valid test credentials\n      const validTestUsers = ['student1', 'researcher1', 'admin', 'testuser'];\n      const validPasswords = ['password123', 'admin123', 'test123'];\n      \n      if (validTestUsers.includes(formData.username) && validPasswords.includes(formData.password)) {\n        alert('Backend unavailable. Using demo mode with valid test credentials.');\n        \n        // Store demo auth info\n        localStorage.setItem('auth_token', 'demo-token-' + Date.now());\n        localStorage.setItem('user_role', formData.role);\n        localStorage.setItem('username', formData.username);\n        \n        // Redirect to main app\n        router.push('/devices');\n      } else {\n        alert('Invalid credentials. Try: student1/password123, researcher1/password123, admin/admin123, or testuser/test123');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGuestAccess = () => {\n    // Set guest credentials\n    localStorage.setItem('auth_token', 'guest-token-' + Date.now());\n    localStorage.setItem('user_role', 'guest');\n    localStorage.setItem('username', 'guest');\n    \n    // Redirect to main app\n    router.push('/devices');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-6\">\n      <div className=\"max-w-md w-full\">\n        {/* Logo and Title */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center mb-8\"\n        >\n          <h1 className=\"text-4xl font-bold text-white mb-2\">Thoth Research</h1>\n          <p className=\"text-gray-300\">Access your IoT research platform</p>\n        </motion.div>\n\n        {/* Auth Form */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20 shadow-xl\"\n        >\n          {/* Tab Switcher */}\n          <div className=\"flex mb-6 bg-white/5 rounded-lg p-1\">\n            <button\n              onClick={() => setIsLogin(true)}\n              className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${\n                isLogin\n                  ? 'bg-blue-500 text-white'\n                  : 'text-gray-300 hover:text-white'\n              }`}\n            >\n              Sign In\n            </button>\n            <button\n              onClick={() => setIsLogin(false)}\n              className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${\n                !isLogin\n                  ? 'bg-blue-500 text-white'\n                  : 'text-gray-300 hover:text-white'\n              }`}\n            >\n              Sign Up\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Username */}\n            <div>\n              <label className=\"block text-sm text-gray-300 mb-2\">Username</label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={formData.username}\n                  onChange={(e) => setFormData({...formData, username: e.target.value})}\n                  className=\"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-400\"\n                  placeholder=\"Enter your username\"\n                  required\n                />\n              </div>\n            </div>\n\n            {/* Password */}\n            <div>\n              <label className=\"block text-sm text-gray-300 mb-2\">Password</label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  value={formData.password}\n                  onChange={(e) => setFormData({...formData, password: e.target.value})}\n                  className=\"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-400\"\n                  placeholder=\"Enter your password\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white\"\n                >\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n\n            {/* Role Selection (for signup) */}\n            {!isLogin && (\n              <div>\n                <label className=\"block text-sm text-gray-300 mb-2\">Role</label>\n                <select\n                  value={formData.role}\n                  onChange={(e) => setFormData({...formData, role: e.target.value})}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-400\"\n                >\n                  <option value=\"researcher\">Researcher</option>\n                  <option value=\"developer\">Developer</option>\n                  <option value=\"student\">Student</option>\n                </select>\n              </div>\n            )}\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 text-white py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2\"\n            >\n              {loading ? (\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\" />\n              ) : (\n                <>\n                  <User className=\"w-5 h-5\" />\n                  {isLogin ? 'Sign In' : 'Create Account'}\n                </>\n              )}\n            </button>\n          </form>\n\n          {/* Divider */}\n          <div className=\"my-6 flex items-center\">\n            <div className=\"flex-1 border-t border-white/20\"></div>\n            <span className=\"px-4 text-sm text-gray-400\">or</span>\n            <div className=\"flex-1 border-t border-white/20\"></div>\n          </div>\n\n          {/* Guest Access */}\n          <button\n            onClick={handleGuestAccess}\n            className=\"w-full bg-white/10 hover:bg-white/20 text-white py-3 px-4 rounded-lg font-medium transition-colors border border-white/20 flex items-center justify-center gap-2\"\n          >\n            <UserCheck className=\"w-5 h-5\" />\n            Continue as Guest\n          </button>\n\n          <p className=\"text-xs text-gray-400 text-center mt-4\">\n            Guest access provides limited functionality. Sign up for full features.\n          </p>\n        </motion.div>\n\n        {/* Footer */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.3 }}\n          className=\"text-center mt-6\"\n        >\n          <p className=\"text-sm text-gray-400\">\n            Need help? <a href=\"#\" className=\"text-blue-400 hover:text-blue-300\">Contact Support</a>\n          </p>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}